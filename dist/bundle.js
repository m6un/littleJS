(()=>{"use strict";function e(e,t={},n=[]){const s=document.createElement(e);for(let e in t)if(e.startsWith("on")&&e[2].toUpperCase()===e[2]){let n=e.replace("on","");n=n[0].toLowerCase()+n.slice(1),s.addEventListener(n,t[e])}else if("style"===e){if("string"==typeof t[e])s.setAttribute(e,t[e]);else if(!Array.isArray(t[e])&&"object"==typeof t[e]){const n=t[e];for(let e in n)s.style.setProperty(void e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase())),n[e])}}else s.setAttribute(e,t[e]);return(Array.isArray(n)?n:[n]).forEach((e=>{"string"==typeof e?e=document.createTextNode(e):e&&e.element&&(e=e.element),e instanceof Node&&s.appendChild(e)})),s}const t=new Proxy({},{get:(t,n,s)=>e.bind({},n)}),{div:n,button:s,br:o}=t;console.log("div",t.div);const r=new class{constructor(e){this.listeners=[],this.proxy=this.observe(e)}observe(e){if(null!==e&&"object"==typeof e){for(const t in e)e[t]=this.observe(e[t]);return new Proxy(e,{set:(e,t,n)=>(console.log({target:e,property:t,value:n}),e[t]=this.observe(n),this.notifyListeners(),!0)})}return e}notifyListeners(){console.log(this.listeners),this.listeners.forEach((e=>e()))}get(){return this.proxy}set(e){this.proxy=this.observe(e),this.notifyListeners()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}}({counter1:0,counter2:0}),i=function(e,t){const i={element:null,signalUnsubscribes:[]};function l(){const e=n({},[`Counter 1: ${r.get().counter1} `,s({onClick:()=>r.get().counter1++},["Increment Counter 1"]),o(),`Counter 2: ${r.get().counter2} `,s({onClick:()=>r.get().counter2++},["Increment Counter 2"])]);i.element&&i.element.parentNode&&(console.log("parent",i.element.parentNode),console.log("element",i.element),i.element.parentNode.replaceChild(e,i.element)),i.element=e,console.log({newElement:e})}return t.forEach((e=>{i.signalUnsubscribes.push(e.subscribe(l))})),console.log("signalUnsubscribes",i.signalUnsubscribes),l(),i}(0,[r]);i.element&&document.body.appendChild(i.element)})();